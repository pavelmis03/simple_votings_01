<div class="wrapper">
    {% include "navigation/menu_drop.html" %}
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark" uk-navbar>
        <div class="uk-navbar-left">

            <button type="button" id="sidebarCollapse" class="btn btn-info">
                <img src="../../../static/icons/32x32/logo.png">
            </button>
            <a class="navbar-brand" style="padding: 10px;" href="/">Voting box</a>

            <ul class="uk-navbar-nav">
                <li class="nav-item active">
                    {% for item in MenuMain %}
                    <!--                    <button class="uk-button uk-button-light" type="button" uk-toggle="target: #{{ item.punct_text }}"></button>-->
                    <button class="uk-button uk-button-light uk-margin-small-right" type="button" uk-toggle="target: #{{ item.punct_text }}">Создать vote</button>
                    <div align="center" id="{{ item.punct_text }}" uk-modal>
                        <form action="add_new_voting/" method="post" class="uk-card uk-card-default uk-dark uk-card-hover uk-card-body uk-width-1-2@m uk-animation-slide-top">
                            {% csrf_token %}
                            <br class="uk-fieldset">
                            <div class="uk-modal-header">
                                
                                   <h2> <legend align="center">Создайте ваш vote</legend></h2>
                                
                            </div>
                            <div class="uk-modal-body">
                                
                                    <div class="uk-margin">
                                        <span class="uk-legend uk-text-middle">Ваш вопрос</span>
                                        <input class="uk-input" type="text" placeholder="...">
                                    </div>

                                    <div class="uk-margin">
                                        <span class="uk-legend uk-text-middle">Введите варианты ответа</span>
                                        <div class="" id="Pols"> </div>
                                        <div class="uk-button uk-button-default" id="AddVoteP">Добавить пункт</div>

                                    </div>

                                    <input type="checkbox" class="uk-checkbox"> Много вариантный режим<br>
                                
                                </div>
                                <div class="uk-modal-footer uk-text-right">
                                    <button class="uk-button uk-button-default uk-modal-close" type="button" >Отмена</button>
                                    <input class="uk-button uk-button-primary" type="submit" value="Опубликовать vote">
                                </div>
                            
                        </form>

                    </div>
                    {% endfor %}
                </li>
            </ul>

        </div>
        <div class="uk-navbar-right">
            <input class="uk-input uk-form-width-small" type="text" placeholder="Search">
            <li class="nav-item active">
                {% for item in MenuMainAnon %}
                {% if item.punct_link == '/profile' %}
                <button class="uk-button uk-button-primary">{{ item.punct_text }}</button>
                {% include "navigation/profile.html" %}
                {% else %}
                <button class="uk-button uk-button-primary" uk-toggle="target: #{{ item.punct_text }}">{{ item.punct_text }}</button>
                {% if item.punct_text == 'Войти' %}
                <div align="center" id="{{ item.punct_text }}" uk-modal>
                    <form method="post" class="uk-card uk-card-default uk-dark uk-card-hover uk-card-body uk-width-1-2@m uk-animation-slide-top">
                        {% csrf_token %}
                        <div class="uk-card-header">
                            <!--                            <button class="uk-modal-close-default" align="rigth" type="button" uk-close></button>-->
                            <div class="container uk-crad-header">
                                <h2 align="center">Войти</h2>
                            </div>
                        </div>
                        <fieldset class="uk-fieldset">

                            <div class="uk-modal-footer uk-text-left">
                                <div class="uk-margin">
                                    <span align="left" class="uk-legend">Имя пользователя</span>
                                    {{ form.username }}
                                </div>

                                <div class="uk-margin">
                                    <span align="left" class="uk-legend">Пароль</span>
                                    {{ form.password }}
                                </div>
                            </div>
                            <div class="uk-modal-footer uk-text-right">
                                <button class="uk-button uk-button-default uk-modal-close" type="button">Отмена</button>
                                <input class="uk-button uk-button-primary" type="submit" value="Войти">
                            </div>
                        </fieldset>
                    </form>
                </div>
                {% else %}
                <div align="center" id="{{ item.punct_text }}" uk-modal>
                    <form method="POST" class="uk-card uk-card-default uk-dark uk-card-hover uk-card-body uk-width-1-2@m uk-animation-slide-top">
                        {% csrf_token %}
                        <div class="uk-modal-header">
                            <h2 class="uk-modal-title " align="center">Регистрация</h2>
                        </div>
                        <fieldset class="uk-fieldset">
                            <div class="uk-modal-footer uk-text-left" align="center">
                                <div class="uk-margin" align="center">
                                    <span align="left" class="uk-legend">Имя пользователя</span><br>
                                    {{ form1.username }}
                                </div>

                                <div class="uk-margin" align="center">
                                    <span align="left" class="uk-legend">Придумайте пароль</span><br>
                                    {{ form1.password1 }}
                                </div>

                                <ul align="center" class="uk-list" align="center">
                                    <li>Пароль должен состоять минимум из 8 символов латинского алфавита, а также иметь символы разных регистров и цифры(у).</li>
                                </ul>

                                <div class="uk-margin" align="center">
                                    <span align="left" class="uk-legend">Повторите пароль</span><br>
                                    {{ form1.password2 }}
                                </div>
                            </div>
                        </fieldset>
                        <div class="uk-margin uk-grid-small uk-child-width-auto uk-grid">
                            {{ form1.male }}
                            {{ form1.female }}
                        </div>
                        <div class="uk-modal-footer uk-text-right">
                            <button class="uk-button uk-button-default uk-modal-close" type="button">Отмена</button>
                            <input class="uk-button uk-button-primary" type="submit" value="Зарегистрироваться">
                        </div>

                    </form>
                </div>
                {% endif %}
                {% endif %}
                {% endfor %}
            </li>
        </div>
    </nav>
    <script>
        'use strict';

        //document.querySelectorAll('.uk-close').addEventListener
        AddVoteP.addEventListener('click', function() {
            let newP = document.createElement('div');
            newP.classList.add('uk-flex');
            let newI = document.createElement('input');
            newI.classList.add('uk-input');
            newI.setAttribute('type', 'text');
            newI.setAttribute('style', 'margin-bottom:1.3em;margin-right:0.3em');
            let newCl = document.createElement('a');
            newCl.classList.add('uk-button');
            newCl.classList.add('uk-button-default');
            newCl.classList.add('uk-close');
            newCl.classList.add('uk-height-1-1');
            newCl.setAttribute('uk-close', '');
            newCl.addEventListener('click', function(e) {
                let a = e.target.parentNode;
                a.innerHTML = "";
                let d = Pols.childList;
                for (i in d) {
                    if (i.innerHTML == "") {
                        d.splice(i, 1);
                    }
                }
                Pols.childList = d;
            });
            newP.appendChild(newI);
            newP.appendChild(newCl);

            // Pols.insertAdjacentHTML("afterEnd", newP);
            Pols.appendChild(newP);
        });

    </script>
</div>
